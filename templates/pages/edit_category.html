{% extends 'base.html' %} {% load exstra_fields %} {% load widget_tweaks %}
{%block links %}
<link
  rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
  integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
  crossorigin="anonymous"
/>
<script
  src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
  integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
  crossorigin="anonymous"
></script>
<script
  src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"
  integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
  crossorigin="anonymous"
></script>
<script
  src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"
  integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
  crossorigin="anonymous"
></script>
{% endblock links %} {% block content %}

<div class="row">
  <div class="col-12">
    <div class="card my-4">
      <div class="card-header p-0 position-relative mt-n4 mx-3 z-index-2">
        <div
          class="bg-gradient-primary shadow-primary border-radius-lg pt-4 pb-3"
        >
          <h6 class="text-white text-capitalize ps-3">
            Edit : {{category.name}} #{{category.id}}
          </h6>
        </div>
      </div>
      <div class="card-body px-0 pb-2">
        <div class="table-responsive p-0">
          <div class="col-lg mb-xl-0 mb-4">
            <div class="card">
              <div class="card-header p-3 pt-2">
                Edit Categoy Main Data : {{category.name}} #{{category.id}}
              </div>
              <div class="card-body px-0 pb-2 align-items-center">
                <form id="mainform" method="post">
                  {% csrf_token %}
                  <div class="form-group row d-flex justify-content-center">
                    <div class="col-lg-6 mb-2 p-3">
                      <label for="name">Category Name</label>
                      <input
                        class="form-control"
                        type="text"
                        value="{{category.name}}"
                        id="name"
                        name="name"
                      />
                    </div>
                    <div class="col-lg-6 mb-2 p-3">
                      <label for="photo">Category Photo Link</label>
                      <input
                        class="form-control"
                        type="text"
                        value="{{category.photo}}"
                        id="photo"
                        name="photo"
                      />
                    </div>
                    <div class="col-lg-6 mb-2 p-3">
                      <label for="status">Category Status</label>
                      <select
                        name="status"
                        class="form-control"
                        id="exampleFormControlSelect1"
                      >
                        {% if category.status == 'approved' %}

                        <option>approved</option>
                        <option>disabled</option>
                        {% else %}
                        <option>disabled</option>
                        <option>approved</option>
                        {% endif %}
                      </select>
                    </div>
                    <!-- Button trigger modal -->
                    <button
                      type="submit"
                      class="btn btn-dark w-95"
                      form="mainform"
                    >
                      Save
                    </button>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="card-body px-0 pb-2">
        <div class="table-responsive p-0">
          <div class="col-lg mb-xl-0 mb-4">
            <div class="card">
              <div class="card-header p-3 pt-2">
                Edit Categoy Fields : {{category.name}} #{{category.id}}
              </div>

              {% if category.fields != None %}

              <div class="card-body px-0 pb-2 align-items-center">
                <form id="fieldform" method="post">
                  {% csrf_token %}
                  <div class="form-group row d-flex justify-content-center">
                    {% for k,v in category.fields|get_items %}
                    <div class="col-lg-6 mb-2 p-3">
                      <label for="{{k}}">{{k}}</label>
                      <input
                        class="form-control"
                        type="text"
                        value="{{v}}"
                        id="{{k}}"
                        name="{{k}}"
                        disabled
                      />

                      {% if k == 'title'%}
                      <a
                        href=""
                        class="btn btn-danger btn-sm m-3"
                        style="color: white"
                        hidden
                      >
                        Delete
                      </a>
                      {% elif k == 'price' %}
                      <a
                        href=""
                        class="btn btn-danger btn-sm m-3"
                        style="color: white"
                        hidden
                      >
                        Delete
                      </a>
                      {% else %}
                      <a
                        href="{% url 'delete_category' category.id k %}"
                        class="btn btn-danger btn-sm m-3"
                        style="color: white"
                      >
                        Delete
                      </a>
                      {% endif %}
                    </div>
                    {% endfor %}
                    <!-- Button trigger modal -->
                    <button
                      type="button"
                      class="btn btn-dark w-95"
                      data-toggle="modal"
                      data-target="#ModalCenter1"
                    >
                      Add New Field
                    </button>
                  </div>
                </form>
              </div>

              {% else %}
              <div
                class="card-body px-0 pb-2 align-items-center justify-content-center d-flex row m-2"
              >
                <h6 class="m-4">No Fields</h6>
                <button
                  type="button"
                  class="btn btn-dark w-95"
                  data-toggle="modal"
                  data-target="#ModalCenter1"
                >
                  Add New Field
                </button>
              </div>
              {% endif %}
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Modal 1 -->
<div
  class="modal fade"
  id="ModalCenter1"
  tabindex="-1"
  role="dialog"
  aria-labelledby="ModalCenter1Title"
  aria-hidden="true"
>
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLongTitle">
          Add New Field To {{category.name}} #{{category.id}}
        </h5>
        <button
          type="button"
          class="close"
          data-dismiss="modal"
          aria-label="Close"
        >
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <form id="fieldform" method="post">
        {% csrf_token %}
        <div class="modal-body">
          <div class="form-group">
            <label for="fieldInput">Field Name</label>
            <input
              type="text"
              class="form-control"
              id="fieldInput"
              placeholder="Enter Field Name"
              name="fields"
            />
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-dark" data-dismiss="modal">
            Close
          </button>
          <input type="submit" value="Save changes" class="btn btn-dark" />
        </div>
      </form>
    </div>
  </div>
</div>
<!-- End Modal 1 -->

{% endblock content %}
